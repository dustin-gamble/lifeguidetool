<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Muscle Building Planner</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial,sans-serif; background: #f4fcfa; }
    .container { display: flex; max-width: 900px; margin: 40px auto; gap: 30px; }
    .inputs { background: #fffbe8; padding: 32px 24px; border-radius: 18px; box-shadow: 0 6px 20px #0001; min-width: 240px; width: 30%}
    .outputs { flex: 2; background: #f0faff; padding: 32px 28px; border-radius: 18px; box-shadow: 0 6px 20px #0001; width: 70%; display: flex; flex-direction: column; align-items: flex-start;}
    h2 { margin-top: 0; }
    .slider-label { display: flex; justify-content: space-between; margin-bottom: 3px; }
    select, input[type=range] { width: 100%; margin-bottom: 10px; }
    .desc { color: #447a55; font-size: 0.93em; margin-bottom: 7px; }
    .summary { margin-top: 18px; font-size: 1.1em; background: #e5f6ee; border-radius: 10px; padding: 10px 18px; }
    canvas { width: 100% !important; height: 340px !important; background: #f6fcff; border-radius: 14px; margin-bottom: 10px; border: 1.5px solid #bbdeff; }
    .muscle-bar { width: 100%; background: #ddd; border-radius: 9px; overflow: hidden; margin-top: 8px;}
    .muscle-fill { background: #7fe1a8; height: 18px; transition: width 0.3s; text-align: center; color: #105d2a; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
    <div class="inputs">
      <h2>ðŸ’ª Muscle Building Planner</h2>
      <div>
        <label class="slider-label">
          <span>Current Training Level</span>
          <span id="levelVal">Beginner</span>
        </label>
        <select id="level">
          <option value="beginner">Beginner (new to lifting)</option>
          <option value="intermediate">Intermediate</option>
          <option value="advanced">Advanced</option>
        </select>
      </div>
      <div>
        <label class="slider-label">
          <span>Sessions per Week</span>
          <span id="freqVal">3</span>
        </label>
        <input id="freq" type="range" min="1" max="7" value="3">
      </div>
      <div>
        <label class="slider-label">
          <span>Session Intensity</span>
          <span id="intensityLabel">Medium</span>
        </label>
        <input id="intensity" type="range" min="1" max="3" value="2">
        <div class="desc" id="intensityDesc">Sets: 12â€“15, 7â€“9 RPE (Effort)</div>
      </div>
      <div>
        <label class="slider-label">
          <span>Daily Protein Intake</span>
          <span id="proteinVal">120</span> g
        </label>
        <input id="protein" type="range" min="40" max="250" value="120">
      </div>
      <div>
        <label class="slider-label">
          <span>Goal</span>
        </label>
        <select id="goal">
          <option value="muscle">Build Muscle</option>
          <option value="strength">Increase Strength</option>
          <option value="endurance">Improve Endurance</option>
        </select>
      </div>
      <div class="summary" id="summaryText"></div>
    </div>
    <div class="outputs">
      <h2>ðŸ“ˆ Projected Gains (24 Weeks)</h2>
      <canvas id="muscleChart"></canvas>
      <div class="desc" id="projected"></div>
      <div class="muscle-bar">
        <div class="muscle-fill" id="muscleFill" style="width:30%">0%</div>
      </div>
    </div>
  </div>
  <script>
    // Simple mappings for muscle gain rate per week (in lb)
    const baseGains = {
      beginner: 0.45, // up to ~2 lb/month
      intermediate: 0.25,
      advanced: 0.10
    };
    const intensityFactors = [0.7, 1.0, 1.18]; // Light, Medium, Heavy
    const proteinFactor = 1; // ideal at 1g/lb bodyweight, so use % (120g ~ 150lb)
    const sessionFactors = [0.7, 0.9, 1, 1.08, 1.15, 1.18, 1.2]; // 1â€“7 sessions

    // Helper for label and desc
    const intensityNames = ["Light", "Medium", "Heavy"];
    const intensityDescs = [
      "Sets: 6â€“10, 5â€“7 RPE (Effort)",
      "Sets: 12â€“15, 7â€“9 RPE (Effort)",
      "Sets: 16+, 9â€“10 RPE, heavy compound focus"
    ];

    // Elements
    const level = document.getElementById('level');
    const freq = document.getElementById('freq');
    const intensity = document.getElementById('intensity');
    const protein = document.getElementById('protein');
    const goal = document.getElementById('goal');
    const levelVal = document.getElementById('levelVal');
    const freqVal = document.getElementById('freqVal');
    const intensityLabel = document.getElementById('intensityLabel');
    const intensityDesc = document.getElementById('intensityDesc');
    const proteinVal = document.getElementById('proteinVal');
    const summaryText = document.getElementById('summaryText');
    const projected = document.getElementById('projected');
    const muscleFill = document.getElementById('muscleFill');

    // Chart.js
    let chart;
    function updateChart() {
      const userLevel = level.value;
      const userFreq = Number(freq.value);
      const userIntensity = Number(intensity.value);
      const userProtein = Number(protein.value);

      levelVal.textContent = level.options[level.selectedIndex].text.split(' ')[0];
      freqVal.textContent = userFreq;
      intensityLabel.textContent = intensityNames[userIntensity - 1];
      intensityDesc.textContent = intensityDescs[userIntensity - 1];
      proteinVal.textContent = userProtein;

      // Calculate muscle gain rate per week
      let base = baseGains[userLevel]; // in lb/week
      let intensityF = intensityFactors[userIntensity - 1];
      let sessionF = sessionFactors[userFreq - 1];
      let proteinF = Math.min(userProtein / 120, 1.2); // max 20% boost if super high
      let rate = base * intensityF * sessionF * proteinF;

      // Project for 24 and 52 weeks
      let gains = [];
      for (let w = 0; w <= 24; w++) gains.push((w * rate));
      let weeks = Array.from({length: 25}, (_, i) => i);
      chart.data.labels = weeks;
      chart.data.datasets[0].data = gains;
      chart.update();

      // Bar fill, summary
      let maxPossible = 24 * baseGains.beginner * 1.2 * 1.2 * 1.2; // best-case for 24w
      let percent = Math.min(100, (gains[24] / maxPossible) * 100);
      muscleFill.style.width = percent.toFixed(1) + '%';
      muscleFill.textContent = gains[24].toFixed(1) + ' lb in 24w';

      let strength = (gains[24] * 10 + 40); // rough bench press gain (arbitrary)
      let mainGoal = goal.value;
      let sum = `If you stay consistent, you could gain <b>${gains[24].toFixed(1)} lb</b> muscle in 6 months.`;
      if (mainGoal === "strength")
        sum += `<br>Est. strength gain: +${Math.round(strength)} lb (bench press equivalent)`;
      else if (mainGoal === "endurance")
        sum += `<br>Endurance: improved muscle quality and fatigue resistance.`;
      summaryText.innerHTML = sum;

      // Show projection for 1yr
      let gain52 = 52 * rate;
      projected.innerHTML = `Projected <b>${mainGoal == "muscle" ? "muscle gain" : mainGoal == "strength" ? "strength" : "endurance"}</b> after 1 year: <b>${mainGoal == "muscle" ? gain52.toFixed(1) + " lb" : mainGoal == "strength" ? "+"+Math.round(gain52*10+40)+" lb bench" : "Big endurance increase!"}</b>`;
    }

    level.addEventListener('input', updateChart);
    freq.addEventListener('input', updateChart);
    intensity.addEventListener('input', updateChart);
    protein.addEventListener('input', updateChart);
    goal.addEventListener('input', updateChart);

    // Init Chart.js
    chart = new Chart(document.getElementById('muscleChart').getContext('2d'), {
      type: 'line',
      data: {
        labels: Array.from({length: 25}, (_, i) => i),
        datasets: [{
          label: 'Projected Muscle Gain (lb)',
          data: Array(25).fill(0),
          borderWidth: 3,
          pointRadius: 0,
          borderColor: "#47be84",
          backgroundColor: "rgba(71,190,132,0.14)",
          fill: true,
          tension: 0.18
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: { title: { display: true, text: 'Weeks', font: { size: 15, weight: 700 } }, grid: { color: "#e3eee7" }, ticks: { font: { size: 14 } } },
          y: { title: { display: true, text: 'Muscle Gain (lb)', font: { size: 15, weight: 700 } }, grid: { color: "#e3eee7" }, ticks: { font: { size: 14 } } }
        },
        plugins: { legend: { display: false } }
      }
    });

    updateChart();
  </script>
</body>
</html>
